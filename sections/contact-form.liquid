{{ 'section-contact-form.css' | asset_url | stylesheet_tag }}

<div class="{% if section.settings.fullwidth == false %} {% if page.template_suffix contains 'contact' %}page-contact-width{%else%}container{% endif %}{% endif %} spaced-section">

  {% if section.settings.heading_form %}
    <h2 class="h1 heading-form">{{ section.settings.heading_form }}</h2>
  {% endif %}
  {% if section.settings.description_form %}
    <p class="desc-form">{{ section.settings.description_form }}</p>
  {% endif %}
  {%- form 'contact', id: 'ContactForm' , class: 'contact-form row' -%}
    {%- if form.posted_successfully? -%}
      <div class="col-12">
        <div class="form-message form-message--success" tabindex="-1" autofocus>{{ 'templates.contact.form.post_success' | t }}</div>
      </div>
    {%- elsif form.errors -%}
      <div class="col-12">
        <div class="form-message form-message--error" role="alert" tabindex="-1" autofocus>
          <ul role="list">
            <li>
              <a href="#ContactForm-email" class="form-message__link no-effect">
                {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
              </a>
            </li>
          </ul>
        </div>
      </div>
    {%- endif -%}
    
    <div class="field field-wrapper col-12 col-sm-6">
        <label for="ContactForm-firstname">{{ 'templates.contact.form.firstname' | t }}</label>
        <input 
          class="text-field-input" 
          autocomplete="firstname" 
          type="text" 
          id="ContactForm-firstname" 
          name="contact[{{ 'templates.contact.form.firstname' | t }}]" 
          value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
          required
        >
    </div>
    <div class="field field-wrapper col-12 col-sm-6">
        <label for="ContactForm-lastname">{{ 'templates.contact.form.lastname' | t }}</label>
        <input 
          class="text-field-input" 
          autocomplete="lastname" 
          type="text" 
          id="ContactForm-lastname" 
          name="contact[{{ 'templates.contact.form.lastname' | t }}]" 
          value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
          required
        >
    </div>
    <div class="field field-wrapper col-12 col-sm-6">
        <label for="ContactForm-email">{{ 'templates.contact.form.email' | t }}</label>
        <input
          autocomplete="email"
          type="email"
          id="ContactForm-email"
          class="text-field-input"
          name="contact[email]"
          spellcheck="false"
          autocapitalize="off"
          value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
          aria-required="true"
        >
    </div>

    <div class="field field-wrapper col-12 col-sm-6">
      <label for="ContactForm-phone">{{ 'templates.contact.form.phone' | t }}</label>
      <input 
        type="tel" 
        id="ContactForm-phone" 
        class="text-field-input" 
        autocomplete="tel" 
        name="contact[{{ 'templates.contact.form.phone' | t }}]" 
        pattern="[0-9\-]*" value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}"
        required
      >
    </div>
    <div class="field field-wrapper col-12">
      <label class="form__label field__label" for="ContactForm-body">{{ 'templates.contact.form.comment' | t }}</label>
      <textarea
        rows="7"
        id="ContactForm-body"
        class="text-field-input"
        name="contact[{{ 'templates.contact.form.comment' | t }}]"
        required
      >
        {{- form.body -}}
      </textarea>
    </div>
    <div class="contact__button col-12">
      <button type="submit" class="btn" aria-label="{{ 'templates.contact.form.send' | t }}">
        {{ 'templates.contact.form.send' | t }}
      </button>
    </div>
  {%- endform -%}
</div>

{% schema %}
{
  "name": "t:sections.contact-form.name",
  "tag": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "fullwidth",
      "label": "Fullwidth",
      "default": false
    },
    {
      "type": "textarea",
      "id": "heading_form",
      "label": "Heading form",
      "default": "Fill up the form <br>if you have any question"
    },
    {
      "type": "textarea",
      "id": "description_form",
      "label": "Description form",
      "default": "We do our best to respond to quickly, it could take us <br>around 1 hour to get back to you. Feel free to say hello!"
    }
  ]
}
{% endschema %}
